"use strict";(self.webpackChunks_low_control=self.webpackChunks_low_control||[]).push([[841],{1764:function(t,n,i){i.r(n),i.d(n,{default:function(){return k}});var e=i(5257),a={},o=(0,e.createContext)(a),r=function(){return(0,e.useContext)(o)},s=i(3745),l=i(9050),c=i(1120),d=i(3233);var u=i(7933),h=i(1418),p=new((0,l.Z)((function t(){var n=this;(0,c.Z)(this,t),this.filterParams=void 0,this.modalShow=void 0,this.pagination=void 0,this.modalOption=void 0,this.list={pending:!1,success:!1,error:!1,data:[]},this.modalDialogRef={current:null},this.openModalHandle=function(){n.modalShow=!0,n.modalDialogRef.current.open()},this.closeModalHandle=function(){n.modalShow=!1},this.setFilterParams=function(t){n.filterParams=t},this.getList=function(){var t;n.list.pending=!0,(t={pageSize:n.pagination.pageSize,pageNo:n.pagination.current},d.Z.get("/upload/list",{params:t})).then((function(t){n.list={data:(0,u.Z3)(t.data),pending:!1,success:!0,error:!1},n.pagination=(0,s.Z)((0,s.Z)({},n.pagination),{},{total:t.total})})).catch((function(){n.list.error=!0,n.list.pending=!1}))},this.resetPagination=function(){n.pagination.current=1},this.reset=function(){n.filterParams={},n.resetPagination(),n.getList()},this.setModalOption=function(t){n.modalOption=t},this.onTableChange=function(t){n.pagination=(0,s.Z)((0,s.Z)({},n.pagination),{},{current:t.current}),n.getList()},(0,h.ky)(this),this.modalShow=!1,this.filterParams={},this.modalOption={},this.pagination={current:1,pageSize:10,total:0}}))),f=i(1459),g=i(378),m=i(4625),Z=(0,f.observer)((function(){var t=r(),n=t.pagination,i=t.list,a=t.getList,o=t.onTableChange,l=(t.setModalOption,t.openModalHandle,[{title:"\u4e0a\u4f20\u65e5\u671f",dataIndex:"file",key:"file"},{title:"\u5730\u5740",dataIndex:"path",key:"path",ellipsis:!0},{title:"\u56fe\u7247",dataIndex:"path",key:"path",render:function(t){return(0,m.jsx)("img",{src:t,alt:"",style:{width:100}})}}]);return(0,e.useEffect)((function(){a()}),[]),(0,m.jsx)(g.Z,{scroll:{x:"max-content"},style:{marginTop:16},dataSource:i.data,columns:l,rowKey:"id",loading:i.pending,pagination:(0,s.Z)((0,s.Z)({},n),{},{hideOnSinglePage:!1,showTotal:function(t){return"\u5171 ".concat(t," \u6761")}}),onChange:o})})),v=i(4591),x=i(4726),w=i(8513),P=i(7889),S=i(2189),y=i(4944),j={beforeUpload:function(t){var n=t.type.indexOf("image/")>-1;return n||P.ZP.error("".concat(t.name," is not a png file")),n||S.Z.LIST_IGNORE},action:"".concat("http://110.42.188.221:13000","/api/v1/upload/file"),headers:{Authorization:"Bearer "+(0,x.LP)()}};var L=function(){var t=r().getList,n=(0,e.useState)([]),i=(0,v.Z)(n,2),a=i[0],o=i[1];return(0,m.jsx)(S.Z,(0,s.Z)((0,s.Z)({},j),{},{fileList:a,onChange:function(n){var i=n.file,e=n.fileList;"done"===i.status?(t(),setTimeout((function(){o([])}),400)):o(e)},children:(0,m.jsx)(y.ZP,{type:"primary",icon:(0,m.jsx)(w.Z,{}),children:"\u4e0a\u4f20\u56fe\u7247"})}))},k=function(){return(0,m.jsx)(o.Provider,{value:p,children:(0,m.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-outer",children:[(0,m.jsx)(L,{}),(0,m.jsx)(Z,{})]})})}}}]);
//# sourceMappingURL=841.bc73f93d.chunk.js.map