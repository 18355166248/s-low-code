{"version":3,"file":"static/js/791.4b96a4c2.chunk.js","mappings":"kMAEaA,EAAYC,EAAAA,GAAMC,MAAM,CACnCC,KAAMF,EAAAA,GAAMG,SAASH,EAAAA,GAAMI,OAAQ,wBCAxBC,EAAWL,EAAAA,GACrBC,MAAM,WAAY,CACjBK,SAAUP,IAEXQ,UAAS,iBAAO,CAAC,CAAC,IAClBC,OAAM,SAACC,GAAS,MAAM,CAEjBC,mBAAgB,IAADC,EAAAC,EACjB,OAAoB,QAApBD,EAAOF,EAAKH,gBAAQ,IAAAK,GAAU,QAAVC,EAAbD,EAAeE,gBAAQ,IAAAD,OAAV,EAAbA,EAAyBE,SAAS,EAC3C,EACD,IACAC,SAAQ,SAACN,GAAS,MAAM,CACvBO,YAAW,SAACC,GACVR,EAAKS,SAAWD,CAClB,EACAE,YAAW,WACT,EAEFC,cAAa,WACX,EAEH,I,iDCdGC,EAAMhB,EAASiB,OAAO,CAAEhB,SAAU,CAAEJ,KAAM,MAE1CqB,GAASC,EAAAA,EAAAA,IAAoBC,EAAAA,GAcnC,MAZA,WACE,OACEC,EAAAA,EAAAA,KAACC,EAAAA,GAAQ,CAACN,IAAKA,EAAIO,UACjBF,EAAAA,EAAAA,KAACG,EAAAA,GAAc,CAACC,cAAc,SAASC,OAAQC,EAAAA,EAAKJ,UAClDF,EAAAA,EAAAA,KAACO,EAAAA,SAAQ,CAACC,UAAUR,EAAAA,EAAAA,KAACS,EAAAA,EAAiB,IAAIP,UACxCF,EAAAA,EAAAA,KAACU,EAAAA,GAAc,CAACb,OAAQA,SAKlC,ECVA,EAZwB,SAACc,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,SAAAC,GAAkD,IAA/CC,EAAMD,EAANC,OAAQC,EAAMF,EAANE,OAAQC,EAAMH,EAANG,OAAQC,EAAMJ,EAANI,OAAQC,EAAOL,EAAPK,QAC3DJ,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAOP,GACPQ,EAAQR,EACV,GAEJ,ECJaS,EAAAA,WACXC,SAASC,eAAe,SAErBC,QACHvB,EAAAA,EAAAA,KAACwB,IAAAA,WAAgB,CAAAtB,UACfF,EAAAA,EAAAA,KAACyB,EAAG,OAORC,G,yDCLA,IATsD,WACpD,OAAOC,EAAAA,EAAAA,eACL3B,EAAAA,EAAAA,KAAA,OAAK4B,UAAU,iDAAgD1B,UAC7DF,EAAAA,EAAAA,KAAC6B,EAAAA,EAAI,MAEPR,SAASS,KAEb,C,uDCbO,IAAMC,EAAkB,oB,4KCgBzBC,GAAcC,EAAAA,EAAAA,eAA+B,MAEnD,SAASC,IACP,OAAOC,EAAAA,EAAAA,YAAWH,EACpB,CAEA,IAAMI,EAAU,WAAH,OAASC,EAAAA,EAAAA,KAAiB,EAEvC,SAASC,EAAYxB,GAA+C,IAA5CZ,EAAQY,EAARZ,SACtBqC,GAAwBC,EAAAA,EAAAA,UAAwC,MAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/DI,EAAIF,EAAA,GAAEG,EAAOH,EAAA,GACdI,GAAaC,EAAAA,EAAAA,SAAO,GACpBC,GAAWC,EAAAA,EAAAA,MAEXC,EAA4C,WAA7BC,OAAOC,SAASC,UAErCC,EAAAA,EAAAA,YAAU,WACR,IAAMC,GAAcjB,EAAAA,EAAAA,MACpBiB,GAAeV,EAAQU,GAClBA,GAAgBT,EAAWU,UAAWN,GACzCO,GAEJ,GAAG,IAEH,IAQIA,EAAU,WAEZ,OADAX,EAAWU,SAAU,GCvCDhE,EDwCL,CAAEkE,SAAc,OAAJd,QAAI,IAAJA,OAAI,EAAJA,EAAMc,UCvC5BC,EAAAA,EAAOC,KAAK,gBAAiBpE,IDwC/BsB,MAAK,WACJ+B,EAAQ,OACRgB,EAAAA,EAAAA,MACIX,GACFF,EAAS,SAEb,IACCc,SAAQ,WACPhB,EAAWU,SAAU,CACvB,IClDC,IAAiBhE,CDmDtB,EAEA,OACES,EAAAA,EAAAA,KAACgC,EAAY/B,SAAQ,CAAC6D,MAAO,CAAEnB,KAAAA,EAAMoB,OAxB1B,SAACpB,GACZ,OCpCFpD,EDoCgBoD,EClCTe,EAAAA,EAAOC,KAAK,eAAgBpE,IDkCbsB,MAAK,SAACmD,GAGxB,OAFAC,EAAAA,EAAAA,IAAeD,GACfpB,EAAQoB,EAAIrB,MACLqB,CACT,ICzCG,IACLzE,CDyCA,EAkB+CiE,QAAAA,GAAUtD,SACpDA,GAGP,C,qKExBA,EAlC0C,WACxC,IAAM6C,GAAWC,EAAAA,EAAAA,MAMjB,OACEkB,EAAAA,EAAAA,MAAA,OAAKtC,UAAU,0DAAyD1B,SAAA,EACtEF,EAAAA,EAAAA,KAAA,OAAK4B,UAAU,OAAM1B,UACnBgE,EAAAA,EAAAA,MAAA,OAAKtC,UAAU,oGAAmG1B,SAAA,EAChHF,EAAAA,EAAAA,KAAA,OAAK4B,UAAU,QAAO1B,UACpBF,EAAAA,EAAAA,KAAA,MAAI4B,UAAU,WAAU1B,SAAC,8BAE3BgE,EAAAA,EAAAA,MAAA,OAAKtC,UAAU,OAAM1B,SAAA,EACnBF,EAAAA,EAAAA,KAACmE,EAAAA,GAAM,CACLC,KAAK,UACLC,KAAK,QACLzC,UAAU,OACV0C,QAhBZ,WACEvB,EAAS,uBACX,EAcmC7C,SACxB,8BAGDF,EAAAA,EAAAA,KAACmE,EAAAA,GAAM,CAACE,KAAK,QAAOnE,SAAC,sCAI3BF,EAAAA,EAAAA,KAAA,OAAK4B,UAAU,oBAAmB1B,UAChCF,EAAAA,EAAAA,KAAA,OAAKuE,IAAKC,EAAWC,IAAI,SAIjC,ECnCA,MAJA,WACE,OAAOzE,EAAAA,EAAAA,KAAC0E,EAAW,GACrB,E,UCUA,EAR4B,WAC1B,OACE1E,EAAAA,EAAAA,KAACsC,EAAAA,GAAY,CAAApC,UACXF,EAAAA,EAAAA,KAAC2E,EAAAA,GAAM,KAGb,E,UCPMC,GAAQC,EAAAA,EAAAA,OAAK,kBAAM,+EAAuB,IAE1CC,GAAOD,EAAAA,EAAAA,OAAK,kBAAM,wFAAsB,IAExCE,GAAUF,EAAAA,EAAAA,OAAK,kBAAM,uJAAsC,IAC3DG,GAAcH,EAAAA,EAAAA,OAAK,kBAAM,uEAA6B,IACtDI,GAAOJ,EAAAA,EAAAA,OAAK,kBAAM,gKAAgC,IAClDK,GAAOL,EAAAA,EAAAA,OAAK,kBAAM,qIAAgC,IAClDM,GAAON,EAAAA,EAAAA,OAAK,kBAAM,mHAAgC,IAElDO,GAASP,EAAAA,EAAAA,OAAK,kBAAM,wFAAwB,IAMrCQ,EAAsC,CACjD,CACEC,KAAM,UACNC,GAAI,uBACJ/G,KAAM,2BACNgH,SAASxF,EAAAA,EAAAA,KAAC+E,EAAO,KAEnB,CACEO,KAAM,OACNC,GAAI,oBACJ/G,KAAM,2BACNgH,SAASxF,EAAAA,EAAAA,KAACiF,EAAI,KAEhB,CACEK,KAAM,OACNC,GAAI,oBACJ/G,KAAM,2BACNgH,SAASxF,EAAAA,EAAAA,KAACkF,EAAI,KAEhB,CACEI,KAAM,OACNC,GAAI,oBACJ/G,KAAM,2BACNgH,SAASxF,EAAAA,EAAAA,KAACmF,EAAI,MAILpF,EAAwB,CACnC,CACEuF,KAAM,IACNE,SAASxF,EAAAA,EAAAA,KAACyF,EAAI,IACdvF,SAAU,CACR,CACEoF,KAAM,QACNE,SAASxF,EAAAA,EAAAA,KAAC4E,EAAK,KAEjB,CACEU,KAAM,GACNE,SAASxF,EAAAA,EAAAA,KAAC8E,EAAI,IACd5E,SAAU,CACR,CACEoF,KAAM,OACNE,SAASxF,EAAAA,EAAAA,KAAC0F,EAAI,KAEhB,CACEJ,KAAM,cACNE,SAASxF,EAAAA,EAAAA,KAACgF,EAAW,IACrB9E,SAAUmF,GAEZ,CACEC,KAAM,cACNE,SAASxF,EAAAA,EAAAA,KAACoF,EAAM,IAChBO,OAAQ,WAEN,OAAO,IAAIC,SAASC,KAAKC,UADZ,CAAEC,KAAM,UACqB,CACxCC,OAAQ,KAEZ,O,kGC9EL,SAASC,EAAiBC,GAC/BA,aAAkBC,QAChBA,OAAOC,KAAKF,GAAQG,SAAQ,SAACC,GACA,kBAAhBJ,EAAOI,KAChBJ,EAAOI,GAAOJ,EAAOI,GAAKC,OAE9B,GACJ,CAyDO,SAASC,EAAoBN,GAClCA,aAAkBC,QAChBA,OAAOC,KAAKF,GAAQG,SAAQ,SAACC,GAC3B,IAAMxC,EAAQoC,EAAOI,SAETG,IAAV3C,GACU,OAAVA,GACkB,kBAAVA,GAAuC,KAAjBA,EAAMyC,gBAE7BL,EAAOI,EAElB,GACJ,CC1EO,I,EAAMI,EAAsC,CACjD,SAACC,GAQC,MAPsB,QAAlBA,EAAOC,QACTX,EAAiBU,EAAOT,QACxBM,EAAoBG,EAAOT,SACA,SAAlBS,EAAOC,SAChBX,EAAiBU,EAAOpH,MACxBiH,EAAoBG,EAAOpH,OAEtBoH,CACT,EACA,SAACE,GACC,OAAOC,QAAQC,OAAOF,EACxB,G,UCVIF,EAA6B,CACjCK,QAAS,IACTC,aAAc,OACdC,QAAS,CACP,eAAgB,oBAElBC,QAAQ,GAADC,OAAKC,8BAA8B,YAGtC3D,EAAS4D,IAAAA,OAAaX,IAE5BY,EAAA7D,EAAO8D,aAAaC,SAAQC,IAAGC,MAAAJ,GAAAK,EAAAA,EAAAA,GAAIlB,IAEnChD,EAAO8D,aAAaC,QAAQC,KAC1B,SAACf,GACC,IAAMkB,GAAQC,EAAAA,EAAAA,MAGd,OADCnB,EAAOO,QAAgBa,cAAgB,UAAYF,EAC7ClB,CACT,IACA,SAACE,GACC,OAAOC,QAAQC,OAAOF,EACxB,IAGFnD,EAAO8D,aAAaQ,SAASN,KAC3B,SAAC1D,GAAS,IAADiE,EAAAC,EACP,OAAuB,OAAX,QAARD,EAAAjE,EAAIzE,YAAI,IAAA0I,OAAA,EAARA,EAAUE,OACZnE,EAAIzE,KAAK6I,SACPC,EAAAA,EAAaxB,MAAM,CACjBuB,QAASpE,EAAIzE,KAAK6I,UAEftB,QAAQC,OAAO/C,EAAIzE,KAAK6I,UAGlB,QAAfF,EAAOlE,EAAIzE,YAAI,IAAA2I,OAAA,EAARA,EAAU3I,IACnB,IACA,SAACsH,GAAW,IAADyB,EACT,GAAgC,OAAvB,OAALzB,QAAK,IAALA,GAAe,QAAVyB,EAALzB,EAAOmB,gBAAQ,IAAAM,OAAV,EAALA,EAAiBtC,QAInB,OAHApC,EAAAA,EAAAA,MACAV,OAAOC,SAASoF,QAAQ,UAEjBzB,QAAQC,OAAOF,GAExB,IAAM2B,EAAe,OAAL3B,QAAK,IAALA,OAAK,EAALA,EAAOmB,SAASzI,KAShC,OARIiJ,GACFA,EAAQJ,SACNC,EAAAA,EAAaxB,MAAM,CACjBP,IAAKkC,EAAQJ,QACbA,QAASI,EAAQJ,UAIhBtB,QAAQC,OAAOF,EACxB,IAGF,O,qKC3DM4B,EAAkB,kBAClBC,EAAY,YAMX,SAASZ,IACd,OAAOa,aAAaC,QAAQH,EAC9B,CAUO,SAASpG,IACd,OAAOwD,KAAKgD,MAAMF,aAAaC,QAAQF,IAAc,OACvD,CAMO,SAASzE,EAAeD,GAxB/B,IAAkB6D,IAyBP7D,EAAI8E,aAxBbH,aAAaI,QAAQN,EAAiBZ,GAWxC,SAAuB/G,GAAmC,IAAhC6B,EAAI7B,EAAJ6B,KACxBgG,aAAaI,QAAQL,EAAW7C,KAAKC,UAAUnD,GACjD,CAYEqG,CAAehF,EACjB,CAEO,SAASJ,IApBP+E,aAAaM,WAAWR,GAYxBE,aAAaM,WAAWP,EAWjC,CAGO,SAASQ,IACd,IAAMC,EAAY9H,SAASC,eAAeS,EAAAA,GAChC,OAAToH,QAAS,IAATA,GAAAA,EAAmBC,cAAcC,YAChC,CACEC,KAAM,cACNpD,OAAQ4B,KAEV,IAEJ,C","sources":["stores/appStore.types.ts","stores/AppStore.ts","App.tsx","reportWebVitals.ts","bootstrap.tsx","components/Loading/FullScreenLoading.tsx","constants/index.ts","pages/Auth/AuthContext.tsx","services/login.ts","pages/Home/Content/index.tsx","pages/Home/index.tsx","pages/Slow/index.tsx","router/index.tsx","utils/common.ts","services/$axios.config.ts","services/$axios.ts","utils/auth.ts"],"sourcesContent":["import { types } from \"mobx-state-tree\";\r\n\r\nexport const USER_INFO = types.model({\r\n  name: types.optional(types.string, \"用户名\"),\r\n});\r\n","import { types } from \"mobx-state-tree\";\r\nimport { USER_INFO } from \"./appStore.types\";\r\n\r\nexport const AppStore = types\r\n  .model(\"AppStore\", {\r\n    userInfo: USER_INFO,\r\n  })\r\n  .volatile(() => ({}))\r\n  .views((self: any) => ({\r\n    // 判断是否是运营\r\n    get getIsOperate() {\r\n      return self.userInfo?.bizRoles?.includes(2);\r\n    },\r\n  }))\r\n  .actions((self: any) => ({\r\n    setOpenKeys(data: any[]) {\r\n      self.openKeys = data;\r\n    },\r\n    afterCreate() {\r\n      // console.log(\"appStore afterCreate\");\r\n    },\r\n    beforeDestroy() {\r\n      // console.log(\"appStore beforeDestroy\");\r\n    },\r\n  }));\r\n","import \"./App.css\";\r\nimport { createBrowserRouter, RouterProvider } from \"react-router-dom\";\r\nimport { Provider } from \"mobx-react\";\r\nimport { AppStore } from \"@/stores/AppStore\";\r\nimport { ConfigProvider } from \"antd\";\r\nimport { routes } from \"./router\";\r\nimport { Suspense } from \"react\";\r\nimport FullScreenLoading from \"./components/Loading/FullScreenLoading\";\r\nimport zhCN from \"antd/locale/zh_CN\";\r\n\r\nconst app = AppStore.create({ userInfo: { name: \"\" } });\r\n\r\nconst router = createBrowserRouter(routes);\r\n\r\nfunction App() {\r\n  return (\r\n    <Provider app={app}>\r\n      <ConfigProvider componentSize=\"middle\" locale={zhCN}>\r\n        <Suspense fallback={<FullScreenLoading />}>\r\n          <RouterProvider router={router} />\r\n        </Suspense>\r\n      </ConfigProvider>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from \"web-vitals\";\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"@/assets/styles/common.scss\";\r\nimport \"@/assets/iconfont/iconfont.css\";\r\n\r\nconst root = ReactDOM.createRoot(\r\n  document.getElementById(\"root\") as HTMLElement\r\n);\r\nroot.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import { Spin } from \"antd\";\r\nimport { FC } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\ninterface FullScreenLoadingProps {}\r\n\r\nconst FullScreenLoading: FC<FullScreenLoadingProps> = () => {\r\n  return createPortal(\r\n    <div className=\"w-full h-full flex justify-center items-center\">\r\n      <Spin />\r\n    </div>,\r\n    document.body\r\n  );\r\n};\r\n\r\nexport default FullScreenLoading;\r\n","export const previewIframeId = \"previewIframeId511\";\r\n","import { signIn, signOut } from \"@/services/login\";\r\nimport { LOGIN_DTO } from \"@/services/types/login\";\r\nimport {\r\n  setAuthStorage,\r\n  removeAuthStorage,\r\n  getUserStorage,\r\n} from \"@/utils/auth\";\r\nimport { createContext, useContext, useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ninterface AuthContextType {\r\n  user: any;\r\n  signin: (user: LOGIN_DTO[\"params\"]) => Promise<LOGIN_DTO[\"Response\"]>;\r\n  signout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>(null!);\r\n\r\nfunction useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n// 是否已登录\r\nconst isLogin = () => getUserStorage();\r\n\r\nfunction AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<LOGIN_DTO[\"Response\"][\"user\"]>(null!);\r\n  const loadingRef = useRef(false);\r\n  const navigate = useNavigate();\r\n\r\n  const notLoginPage = window.location.pathname !== \"/login\";\r\n\r\n  useEffect(() => {\r\n    const storageUser = getUserStorage();\r\n    storageUser && setUser(storageUser);\r\n    if (!storageUser && !loadingRef.current && notLoginPage) {\r\n      signout();\r\n    }\r\n  }, []);\r\n\r\n  let signin = (user: LOGIN_DTO[\"params\"]) => {\r\n    return signIn(user).then((res) => {\r\n      setAuthStorage(res);\r\n      setUser(res.user);\r\n      return res;\r\n    });\r\n  };\r\n\r\n  let signout = () => {\r\n    loadingRef.current = true;\r\n    return signOut({ userName: user?.userName })\r\n      .then(() => {\r\n        setUser(null!);\r\n        removeAuthStorage();\r\n        if (notLoginPage) {\r\n          navigate(\"/login\");\r\n        }\r\n      })\r\n      .finally(() => {\r\n        loadingRef.current = false;\r\n      });\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, signin, signout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\nexport { AuthContext, AuthProvider, useAuth, isLogin };\r\n","import $axios from \"./$axios\";\r\nimport { LOGIN_DTO } from \"./types/login\";\r\n\r\nexport function signIn(\r\n  data: LOGIN_DTO[\"params\"]\r\n): Promise<LOGIN_DTO[\"Response\"]> {\r\n  return $axios.post(\"/auth/signIn\", data);\r\n}\r\n\r\nexport function signOut(data: Pick<LOGIN_DTO[\"params\"], \"userName\">) {\r\n  return $axios.post(\"/auth/signOut\", data);\r\n}\r\n","import { Button } from \"antd\";\r\nimport { FC } from \"react\";\r\nimport GunDamImg from \"@/assets/images/main/gundam.jpeg\";\r\n\r\nimport \"./index.scoped.scss\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\ninterface MainContentProps {}\r\n\r\nconst MainContent: FC<MainContentProps> = () => {\r\n  const navigate = useNavigate();\r\n\r\n  function goApplication() {\r\n    navigate(\"/application/project\");\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-blue-50 relative content grow shrink basis-full flex\">\r\n      <div className=\"left\">\r\n        <div className=\"operate mt-20 mx-20 bg-white rounded-3xl inline-flex flex-col  items-left pl-10 pr-20 pt-10 pb-20\">\r\n          <div className=\"mb-10\">\r\n            <h3 className=\"text-2xl\">SLow低代码</h3>\r\n          </div>\r\n          <div className=\"flex\">\r\n            <Button\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              className=\"mr-4\"\r\n              onClick={goApplication}\r\n            >\r\n              开始使用\r\n            </Button>\r\n            <Button size=\"large\">操作指南</Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"right pr-20 pt-20\">\r\n        <img src={GunDamImg} alt=\"\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainContent;\r\n","import MainContent from \"./Content\";\r\n\r\nfunction Home() {\r\n  return <MainContent />;\r\n}\r\n\r\nexport default Home;\r\n","import { FC } from \"react\";\r\nimport { Outlet } from \"react-router-dom\";\r\nimport { AuthProvider } from \"../Auth/AuthContext\";\r\n\r\ninterface SlowProps {}\r\n\r\nconst Slow: FC<SlowProps> = () => {\r\n  return (\r\n    <AuthProvider>\r\n      <Outlet />\r\n    </AuthProvider>\r\n  );\r\n};\r\n\r\nexport default Slow;\r\n","import Home from \"@/pages/Home\";\r\nimport Slow from \"@/pages/Slow\";\r\nimport { lazy } from \"react\";\r\nimport { RouteObject } from \"react-router-dom\";\r\n\r\nconst Login = lazy(() => import(\"@/pages/Login\"));\r\n\r\nconst Main = lazy(() => import(\"@/pages/Main\"));\r\n\r\nconst Project = lazy(() => import(\"@/pages/Project/indexProject\"));\r\nconst Application = lazy(() => import(\"@/pages/Application\"));\r\nconst User = lazy(() => import(\"@/pages/User/indexUser\"));\r\nconst Role = lazy(() => import(\"@/pages/Role/indexRole\"));\r\nconst Menu = lazy(() => import(\"@/pages/Menu/indexMenu\"));\r\n\r\nconst Editor = lazy(() => import(\"@/pages/Editor\"));\r\n\r\n// 应用页面路由/菜单\r\ntype appInterface = RouteObject & {\r\n  name?: string;\r\n};\r\nexport const applicationChildren: appInterface[] = [\r\n  {\r\n    path: \"project\",\r\n    id: \"/application/project\",\r\n    name: \"项目管理\",\r\n    element: <Project />,\r\n  },\r\n  {\r\n    path: \"user\",\r\n    id: \"/application/user\",\r\n    name: \"用户管理\",\r\n    element: <User />,\r\n  },\r\n  {\r\n    path: \"role\",\r\n    id: \"/application/role\",\r\n    name: \"角色管理\",\r\n    element: <Role />,\r\n  },\r\n  {\r\n    path: \"menu\",\r\n    id: \"/application/menu\",\r\n    name: \"菜单管理\",\r\n    element: <Menu />,\r\n  },\r\n];\r\n\r\nexport const routes: RouteObject[] = [\r\n  {\r\n    path: \"/\",\r\n    element: <Slow />,\r\n    children: [\r\n      {\r\n        path: \"login\",\r\n        element: <Login />,\r\n      },\r\n      {\r\n        path: \"\",\r\n        element: <Main />,\r\n        children: [\r\n          {\r\n            path: \"home\",\r\n            element: <Home />,\r\n          },\r\n          {\r\n            path: \"application\",\r\n            element: <Application />,\r\n            children: applicationChildren as RouteObject[],\r\n          },\r\n          {\r\n            path: \"/editor/:id\",\r\n            element: <Editor />,\r\n            loader: () => {\r\n              const data = { some: \"thing\" };\r\n              return new Response(JSON.stringify(data), {\r\n                status: 200,\r\n              });\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n  },\r\n];\r\n","export function trimObjectValues(params: any) {\r\n  params instanceof Object &&\r\n    Object.keys(params).forEach((key) => {\r\n      if (typeof params[key] === \"string\") {\r\n        params[key] = params[key].trim();\r\n      }\r\n    });\r\n}\r\n\r\nexport function initListId(list: any[], regStrs?: string[], key = \"id\") {\r\n  return list.map((item, index) => ({\r\n    ...item,\r\n    [key]: Array.isArray(regStrs)\r\n      ? regStrs.reduce(\r\n          (idStr: string, key: string) => idStr + (item[key] || key),\r\n          \"\"\r\n        )\r\n      : index + 1,\r\n  }));\r\n}\r\n\r\nexport function initListIndex(\r\n  list: any[],\r\n  regStrs?: string[],\r\n  key: string = \"id\"\r\n) {\r\n  return list.map((item, index) => ({\r\n    ...item,\r\n    [key]: Array.isArray(regStrs)\r\n      ? regStrs.reduce(\r\n          (idStr: string, key: string) => idStr + (item[key] || key),\r\n          \"\"\r\n        )\r\n      : index,\r\n  }));\r\n}\r\n\r\nexport function initListIdWithPagination(list: any[], pagination: any) {\r\n  const { pageNum, pageSize } = pagination;\r\n  return list.map((item, index) => ({\r\n    id: (pageNum - 1) * pageSize + index + 1,\r\n    ...item,\r\n  }));\r\n}\r\n\r\nexport function initListIdWithChannelType(list: any[]) {\r\n  return list.map((item) => ({\r\n    id: item.channelTypeId + item.itemId,\r\n    ...item,\r\n  }));\r\n}\r\n\r\nexport function queryParams() {\r\n  let search = window.location.search;\r\n  search = search[0] === \"?\" ? search.substring(1) : search;\r\n  const query = search.split(\"&\");\r\n\r\n  return query.reduce((obj: any, item: string) => {\r\n    const [key, value] = item.split(\"=\");\r\n    obj[key] = value;\r\n    return obj;\r\n  }, {});\r\n}\r\n\r\nexport function deleteEmptyProperty(params: any) {\r\n  params instanceof Object &&\r\n    Object.keys(params).forEach((key) => {\r\n      const value = params[key];\r\n      if (\r\n        value === undefined ||\r\n        value === null ||\r\n        (typeof value === \"string\" && value.trim() === \"\")\r\n      ) {\r\n        delete params[key];\r\n      }\r\n    });\r\n}\r\n\r\nexport function deleteEmptyPropertyFromArray(list: any[]) {\r\n  if (!Array.isArray(list)) return;\r\n  list.forEach((v: any) => {\r\n    deleteEmptyProperty(v);\r\n  });\r\n}\r\n\r\n// 清空缓存\r\nexport function clearLocalStorage() {\r\n  localStorage.clear();\r\n}\r\n","import { deleteEmptyProperty, trimObjectValues } from '@/utils/common';\r\n\r\nexport const trimRequestInterceptors: [any, any] = [\r\n  (config: any) => {\r\n    if (config.method === 'get') {\r\n      trimObjectValues(config.params);\r\n      deleteEmptyProperty(config.params);\r\n    } else if (config.method === 'post') {\r\n      trimObjectValues(config.data);\r\n      deleteEmptyProperty(config.data);\r\n    }\r\n    return config;\r\n  },\r\n  (error: any) => {\r\n    return Promise.reject(error);\r\n  },\r\n];\r\n","import axios, { AxiosRequestConfig } from \"axios\";\r\nimport { notification } from \"antd\";\r\nimport { trimRequestInterceptors } from \"./$axios.config\";\r\nimport { getToken, removeAuthStorage } from \"@/utils/auth\";\r\n\r\nconst config: AxiosRequestConfig = {\r\n  timeout: 5 * 1000, // 超时设置(单位毫秒)，无超时时间设置为 0。\r\n  responseType: \"json\", // 响应的数据格式：json/blob/document/arraybuffer/text/stream\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n  baseURL: `${process.env.REACT_APP_BASE_URL}/api/v1`,\r\n};\r\n\r\nconst $axios = axios.create(config);\r\n\r\n$axios.interceptors.request.use(...trimRequestInterceptors);\r\n\r\n$axios.interceptors.request.use(\r\n  (config) => {\r\n    const token = getToken();\r\n\r\n    (config.headers as any).Authorization = \"Bearer \" + token;\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n$axios.interceptors.response.use(\r\n  (res) => {\r\n    if (res.data?.code !== 200) {\r\n      res.data.message &&\r\n        notification.error({\r\n          message: res.data.message,\r\n        });\r\n      return Promise.reject(res.data.message);\r\n    }\r\n\r\n    return res.data?.data;\r\n  },\r\n  (error) => {\r\n    if (error?.response?.status === 401) {\r\n      removeAuthStorage();\r\n      window.location.replace(\"/login\");\r\n\r\n      return Promise.reject(error);\r\n    }\r\n    const resData = error?.response.data;\r\n    if (resData) {\r\n      resData.message &&\r\n        notification.error({\r\n          key: resData.message,\r\n          message: resData.message,\r\n        });\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default $axios;\r\n","import { previewIframeId } from \"@/constants\";\r\nimport { LOGIN_DTO } from \"@/services/types/login\";\r\n\r\nconst SLOW_AUTH_TOKEN = \"SLOW_AUTH_TOKEN\";\r\nconst SLOW_USER = \"SLOW_USER\";\r\n\r\nfunction setToken(token: string) {\r\n  localStorage.setItem(SLOW_AUTH_TOKEN, token);\r\n}\r\n\r\nexport function getToken() {\r\n  return localStorage.getItem(SLOW_AUTH_TOKEN);\r\n}\r\n\r\nexport function removeToken() {\r\n  return localStorage.removeItem(SLOW_AUTH_TOKEN);\r\n}\r\n\r\nfunction setUserStorage({ user }: LOGIN_DTO[\"Response\"]) {\r\n  localStorage.setItem(SLOW_USER, JSON.stringify(user));\r\n}\r\n\r\nexport function getUserStorage() {\r\n  return JSON.parse(localStorage.getItem(SLOW_USER) || \"null\");\r\n}\r\n\r\nexport function removeUserStorage() {\r\n  return localStorage.removeItem(SLOW_USER);\r\n}\r\n\r\nexport function setAuthStorage(res: LOGIN_DTO[\"Response\"]) {\r\n  setToken(res.access_token);\r\n  setUserStorage(res);\r\n}\r\n\r\nexport function removeAuthStorage() {\r\n  removeToken();\r\n  removeUserStorage();\r\n}\r\n\r\n// 同步token给子应用\r\nexport function syncStorageWithChild() {\r\n  const iframeDom = document.getElementById(previewIframeId);\r\n  (iframeDom as any)?.contentWindow.postMessage(\r\n    {\r\n      even: \"updateToken\",\r\n      params: getToken(),\r\n    },\r\n    \"*\"\r\n  );\r\n}\r\n"],"names":["USER_INFO","types","model","name","optional","string","AppStore","userInfo","volatile","views","self","getIsOperate","_self$userInfo","_self$userInfo$bizRol","bizRoles","includes","actions","setOpenKeys","data","openKeys","afterCreate","beforeDestroy","app","create","router","createBrowserRouter","routes","_jsx","Provider","children","ConfigProvider","componentSize","locale","zhCN","Suspense","fallback","FullScreenLoading","RouterProvider","onPerfEntry","Function","then","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById","render","React","App","reportWebVitals","createPortal","className","Spin","body","previewIframeId","AuthContext","createContext","useAuth","useContext","isLogin","getUserStorage","AuthProvider","_useState","useState","_useState2","_slicedToArray","user","setUser","loadingRef","useRef","navigate","useNavigate","notLoginPage","window","location","pathname","useEffect","storageUser","current","signout","userName","$axios","post","removeAuthStorage","finally","value","signin","res","setAuthStorage","_jsxs","Button","type","size","onClick","src","GunDamImg","alt","MainContent","Outlet","Login","lazy","Main","Project","Application","User","Role","Menu","Editor","applicationChildren","path","id","element","Slow","Home","loader","Response","JSON","stringify","some","status","trimObjectValues","params","Object","keys","forEach","key","trim","deleteEmptyProperty","undefined","trimRequestInterceptors","config","method","error","Promise","reject","timeout","responseType","headers","baseURL","concat","process","axios","_$axios$interceptors$","interceptors","request","use","apply","_toConsumableArray","token","getToken","Authorization","response","_res$data","_res$data2","code","message","notification","_error$response","replace","resData","SLOW_AUTH_TOKEN","SLOW_USER","localStorage","getItem","parse","access_token","setItem","setUserStorage","removeItem","syncStorageWithChild","iframeDom","contentWindow","postMessage","even"],"sourceRoot":""}