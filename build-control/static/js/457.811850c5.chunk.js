"use strict";(self.webpackChunks_low_control=self.webpackChunks_low_control||[]).push([[457],{6025:function(e,n,t){t.r(n);var r=t(5257),i=t.n(r),o=t(9449),a=t(4468),s=t(4165),c=t(7298),u=t(201),l=u.V5.model({name:u.V5.optional(u.V5.string,"\u7528\u6237\u540d")}),f=u.V5.model("AppStore",{userInfo:l}).volatile((function(){return{}})).views((function(e){return{get getIsOperate(){var n,t;return null===(n=e.userInfo)||void 0===n||null===(t=n.bizRoles)||void 0===t?void 0:t.includes(2)}}})).actions((function(e){return{setOpenKeys:function(n){e.openKeys=n},afterCreate:function(){},beforeDestroy:function(){}}})),d=t(4584),m=t(6990),p=t(6786),v=t(984),g=t(4625),h=f.create({userInfo:{name:""}}),j=(0,a.aj)(m._);var x=function(){return(0,g.jsx)(c.zt,{app:h,children:(0,g.jsx)(d.ZP,{componentSize:"middle",locale:v.Z,children:(0,g.jsx)(r.Suspense,{fallback:(0,g.jsx)(p.Z,{}),children:(0,g.jsx)(s.pG,{router:j})})})})},y=function(e){e&&e instanceof Function&&t.e(221).then(t.bind(t,2221)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),r(e),i(e),o(e),a(e)}))},b=t(1788),k=t(1479);function w(){if(!0===window.confirm("\u9875\u9762\u6709\u66f4\u65b0 \u8bf7\u786e\u8ba4!"))try{navigator.serviceWorker.getRegistration().then((function(e){console.log("\u901a\u77e5 sw \u66f4\u65b0"),e.waiting.postMessage("skipWaiting")}))}catch(e){window.location.reload()}}var S=function(){var e=(0,k.Z)((0,b.Z)().mark((function e(){var n;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serviceWorker"in navigator)){e.next=15;break}return e.prev=1,e.next=4,navigator.serviceWorker.register("/service-worker.js",{scope:"/"});case 4:if(!(n=e.sent).waiting){e.next=8;break}return w(),e.abrupt("return");case 8:n.installing?console.log("\u6b63\u5728\u5b89\u88c5 Service worker"):n.waiting?console.log("\u5df2\u5b89\u88c5 Service worker installed"):n.active&&console.log("\u6fc0\u6d3b Service worker"),n.onupdatefound=function(){var e=n.installing;console.log("\ud83d\ude80 ~ file: initServiceWorker.ts:33 ~ registerServiceWorker ~ installingWorker:",e),e&&(e.onstatechange=function(){if("installed"===e.state)navigator.serviceWorker.controller&&w()})},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("\u6ce8\u518c\u5931\u8d25\uff1a".concat(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();S(),o.createRoot(document.getElementById("root")).render((0,g.jsx)(i().StrictMode,{children:(0,g.jsx)(x,{})})),y()},6786:function(e,n,t){var r=t(1152),i=t(7150),o=t(4625);n.Z=function(){return(0,i.createPortal)((0,o.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,o.jsx)(r.Z,{})}),document.body)}},3986:function(e,n,t){t.d(n,{X:function(){return r}});var r="previewIframeId511"},2150:function(e,n,t){t.d(n,{Ho:function(){return d},bg:function(){return f},aC:function(){return l}});var r=t(4591),i=t(3233);var o=t(4726),a=t(5257),s=t(4165),c=t(4625),u=(0,a.createContext)(null);function l(){return(0,a.useContext)(u)}var f=function(){return(0,o.qn)()};function d(e){var n=e.children,t=(0,a.useState)(null),l=(0,r.Z)(t,2),f=l[0],d=l[1],m=(0,a.useRef)(!1),p=(0,s.s0)(),v="/login"!==window.location.pathname;(0,a.useEffect)((function(){var e=(0,o.qn)();e&&d(e),e||m.current||!v||g()}),[]);var g=function(){return m.current=!0,(e={userName:null===f||void 0===f?void 0:f.userName},i.Z.post("/auth/signOut",e)).then((function(){d(null),(0,o.JV)(),v&&p("/login")})).finally((function(){m.current=!1}));var e};return(0,c.jsx)(u.Provider,{value:{user:f,signin:function(e){return(n=e,i.Z.post("/auth/signIn",n)).then((function(e){return(0,o.RR)(e),d(e.user),e}));var n},signout:g},children:n})}},6990:function(e,n,t){t.d(n,{D:function(){return b},_:function(){return k}});var r=t(4944),i=t.p+"static/media/gundam.992af5d54fe64ec08f35.jpeg",o=t(4165),a=t(4625),s=function(){var e=(0,o.s0)();return(0,a.jsxs)("div",{className:"bg-blue-50 relative content grow shrink basis-full flex",children:[(0,a.jsx)("div",{className:"left",children:(0,a.jsxs)("div",{className:"operate mt-20 mx-20 bg-white rounded-3xl inline-flex flex-col  items-left pl-10 pr-20 pt-10 pb-20",children:[(0,a.jsx)("div",{className:"mb-10",children:(0,a.jsx)("h3",{className:"text-2xl",children:"SLow\u4f4e\u4ee3\u7801"})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(r.ZP,{type:"primary",size:"large",className:"mr-4",onClick:function(){e("/application/project")},children:"\u5f00\u59cb\u4f7f\u7528"}),(0,a.jsx)(r.ZP,{size:"large",children:"\u64cd\u4f5c\u6307\u5357"})]})]})}),(0,a.jsx)("div",{className:"right pr-20 pt-20",children:(0,a.jsx)("img",{src:i,alt:""})})]})};var c=function(){return(0,a.jsx)(s,{})},u=t(2150),l=function(){return(0,a.jsx)(u.Ho,{children:(0,a.jsx)(o.j3,{})})},f=t(5257),d=(0,f.lazy)((function(){return Promise.all([t.e(292),t.e(931),t.e(294),t.e(478),t.e(844)]).then(t.bind(t,268))})),m=(0,f.lazy)((function(){return Promise.all([t.e(292),t.e(931),t.e(19),t.e(83),t.e(720),t.e(636)]).then(t.bind(t,1871))})),p=(0,f.lazy)((function(){return Promise.all([t.e(292),t.e(931),t.e(19),t.e(294),t.e(83),t.e(378),t.e(126),t.e(478),t.e(166),t.e(720),t.e(850),t.e(256),t.e(920)]).then(t.bind(t,733))})),v=(0,f.lazy)((function(){return Promise.all([t.e(292),t.e(931),t.e(19),t.e(576)]).then(t.bind(t,7576))})),g=(0,f.lazy)((function(){return Promise.all([t.e(292),t.e(931),t.e(19),t.e(294),t.e(83),t.e(378),t.e(126),t.e(478),t.e(166),t.e(698),t.e(720),t.e(850),t.e(256),t.e(843)]).then(t.bind(t,3394))})),h=(0,f.lazy)((function(){return Promise.all([t.e(292),t.e(931),t.e(19),t.e(294),t.e(83),t.e(378),t.e(126),t.e(478),t.e(720),t.e(850),t.e(493)]).then(t.bind(t,9493))})),j=(0,f.lazy)((function(){return Promise.all([t.e(292),t.e(931),t.e(19),t.e(294),t.e(83),t.e(378),t.e(720),t.e(850),t.e(889)]).then(t.bind(t,1889))})),x=(0,f.lazy)((function(){return Promise.all([t.e(292),t.e(931),t.e(19),t.e(294),t.e(83),t.e(378),t.e(59),t.e(720),t.e(850),t.e(841)]).then(t.bind(t,1764))})),y=(0,f.lazy)((function(){return Promise.all([t.e(292),t.e(294),t.e(126),t.e(698),t.e(892),t.e(615)]).then(t.bind(t,7439))})),b=[{path:"project",id:"/application/project",name:"\u9879\u76ee\u7ba1\u7406",element:(0,a.jsx)(p,{})},{path:"user",id:"/application/user",name:"\u7528\u6237\u7ba1\u7406",element:(0,a.jsx)(g,{})},{path:"role",id:"/application/role",name:"\u89d2\u8272\u7ba1\u7406",element:(0,a.jsx)(h,{})},{path:"menu",id:"/application/menu",name:"\u83dc\u5355\u7ba1\u7406",element:(0,a.jsx)(j,{})},{path:"images",id:"/application/images",name:"\u56fe\u7247\u7ba1\u7406",element:(0,a.jsx)(x,{})}],k=[{path:"/",element:(0,a.jsx)(l,{}),children:[{path:"login",element:(0,a.jsx)(d,{})},{path:"",element:(0,a.jsx)(m,{}),children:[{path:"home",element:(0,a.jsx)(c,{})},{path:"application",element:(0,a.jsx)(v,{}),children:b},{path:"/editor/:id",element:(0,a.jsx)(y,{}),loader:function(){return new Response(JSON.stringify({some:"thing"}),{status:200})}}]}]}]},3233:function(e,n,t){t.d(n,{Z:function(){return m}});var r,i=t(6932),o=t(9747),a=t.n(o),s=t(7214),c=t(7933),u=[function(e){return"get"===e.method?((0,c.Hk)(e.params),(0,c.m9)(e.params)):"post"===e.method&&((0,c.Hk)(e.data),(0,c.m9)(e.data)),e},function(e){return Promise.reject(e)}],l=t(4726),f={timeout:5e3,responseType:"json",headers:{"Content-Type":"application/json"},baseURL:"".concat("http://110.42.188.221:13000","/api/v1")},d=a().create(f);(r=d.interceptors.request).use.apply(r,(0,i.Z)(u)),d.interceptors.request.use((function(e){var n=(0,l.LP)();return e.headers.Authorization="Bearer "+n,e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){var n,t;return 200!==(null===(n=e.data)||void 0===n?void 0:n.code)?(e.data.message&&s.Z.error({message:e.data.message}),Promise.reject(e.data.message)):null===(t=e.data)||void 0===t?void 0:t.data}),(function(e){var n;if(401===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status))return(0,l.JV)(),window.location.replace("/login"),Promise.reject(e);var t=null===e||void 0===e?void 0:e.response.data;return t&&t.message&&s.Z.error({key:t.message,message:t.message}),Promise.reject(e)}));var m=d},4726:function(e,n,t){t.d(n,{JV:function(){return u},LP:function(){return a},RR:function(){return c},T:function(){return l},qn:function(){return s}});var r=t(3986),i="SLOW_AUTH_TOKEN",o="SLOW_USER";function a(){return localStorage.getItem(i)}function s(){return JSON.parse(localStorage.getItem(o)||"null")}function c(e){var n;n=e.access_token,localStorage.setItem(i,n),function(e){var n=e.user;localStorage.setItem(o,JSON.stringify(n))}(e)}function u(){localStorage.removeItem(i),localStorage.removeItem(o)}function l(){var e=document.getElementById(r.X);null===e||void 0===e||e.contentWindow.postMessage({even:"updateToken",params:a()},"*")}},7933:function(e,n,t){t.d(n,{Hk:function(){return o},Z3:function(){return a},m9:function(){return s}});var r=t(2521),i=t(3745);function o(e){e instanceof Object&&Object.keys(e).forEach((function(n){"string"===typeof e[n]&&(e[n]=e[n].trim())}))}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return e.map((function(e,o){return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},t,Array.isArray(n)?n.reduce((function(n,t){return n+(e[t]||t)}),""):o+1))}))}function s(e){e instanceof Object&&Object.keys(e).forEach((function(n){var t=e[n];(void 0===t||null===t||"string"===typeof t&&""===t.trim())&&delete e[n]}))}}}]);
//# sourceMappingURL=457.811850c5.chunk.js.map