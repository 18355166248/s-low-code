{"version":3,"file":"static/js/components-UploadSingleImg.6133a12f.chunk.js","mappings":"8NAwEA,UAtDyC,SAACA,GACxC,IAAQC,EAAoBD,EAApBC,SAAUC,EAAUF,EAAVE,MAElBC,GAA8BC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAtCI,EAAOF,EAAA,GAAEG,EAAUH,EAAA,GAC1BI,GAAgCL,EAAAA,EAAAA,YAAkBM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAA3CE,EAAQD,EAAA,GAAEE,EAAWF,EAAA,IAE5BG,EAAAA,EAAAA,YAAU,WACRD,EAAYV,EACd,GAAG,CAACA,IAEJ,IAmBMY,GACJC,EAAAA,EAAAA,MAAA,OAAAC,SAAA,CACGT,GAAUU,EAAAA,EAAAA,KAACC,EAAAA,EAAe,KAAMD,EAAAA,EAAAA,KAACE,EAAAA,EAAY,KAC9CF,EAAAA,EAAAA,KAAA,OAAKG,MAAO,CAAEC,UAAW,GAAIL,SAAC,cAIlC,OACEC,EAAAA,EAAAA,KAACK,EAAAA,EAAO,CAACC,gBAAc,EAAAP,UACrBC,EAAAA,EAAAA,KAACO,EAAAA,EAAM,CACLC,OAAO,mDACPC,SAAS,eACTC,gBAAgB,EAChBC,aAhCe,SAACC,GAgBpB,MAfiC,eAAdA,EAAKC,MAAuC,cAAdD,EAAKC,MAEpDC,EAAAA,GAAQC,MAAM,qCAEDH,EAAKI,KAAO,KAAO,KAAO,GAEvCF,EAAAA,GAAQC,MAAM,gCAvBF,SAACE,EAAaC,GAC9B,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,iBAAiB,QAAQ,kBAAMH,EAASC,EAAOG,OAAiB,IACvEH,EAAOI,cAAcN,EACvB,CAqBIO,CAAUZ,GAAgB,SAACa,GACzBlC,GAAW,GACXI,EAAY8B,IAEZC,EAAAA,EAAAA,GAAW1C,IAAaA,EAASyC,EACnC,KAEO,CACT,EAeiC1B,SAE1BL,GACCM,EAAAA,EAAAA,KAAA,OAAK2B,IAAKjC,EAAUkC,IAAI,SAASzB,MAAO,CAAE0B,MAAO,UAEjDhC,KAKV,C","sources":["EditFormComponents/UploadSingleImg/index.tsx"],"sourcesContent":["import ImgCrop from \"antd-img-crop\";\nimport type { RcFile } from \"antd/es/upload/interface\";\nimport React, { useEffect, useState } from \"react\";\nimport { LoadingOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { isFunction } from \"lodash-es\";\nimport { message, Upload } from \"antd\";\n\ninterface Props {\n  onChange: (value: string) => void;\n  value: string;\n}\n\nconst getBase64 = (img: RcFile, callback: (url: string) => void) => {\n  const reader = new FileReader();\n  reader.addEventListener(\"load\", () => callback(reader.result as string));\n  reader.readAsDataURL(img);\n};\n\nconst UploadSingleImg: React.FC<Props> = (props) => {\n  const { onChange, value } = props;\n\n  const [loading, setLoading] = useState(false);\n  const [imageUrl, setImageUrl] = useState<string>();\n\n  useEffect(() => {\n    setImageUrl(value);\n  }, [value]);\n\n  const beforeUpload = (file: RcFile) => {\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\n    if (!isJpgOrPng) {\n      message.error(\"You can only upload JPG/PNG file!\");\n    }\n    const isLt2M = file.size / 1024 / 1024 < 2;\n    if (!isLt2M) {\n      message.error(\"Image must smaller than 2MB!\");\n    }\n    getBase64(file as RcFile, (url) => {\n      setLoading(false);\n      setImageUrl(url);\n\n      isFunction(onChange) && onChange(url);\n    });\n\n    return false;\n  };\n\n  const uploadButton = (\n    <div>\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\n      <div style={{ marginTop: 8 }}>Upload</div>\n    </div>\n  );\n\n  return (\n    <ImgCrop rotationSlider>\n      <Upload\n        action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\n        listType=\"picture-card\"\n        showUploadList={false}\n        beforeUpload={beforeUpload}\n      >\n        {imageUrl ? (\n          <img src={imageUrl} alt=\"avatar\" style={{ width: \"100%\" }} />\n        ) : (\n          uploadButton\n        )}\n      </Upload>\n    </ImgCrop>\n  );\n};\n\nexport default UploadSingleImg;\n"],"names":["props","onChange","value","_useState","useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","imageUrl","setImageUrl","useEffect","uploadButton","_jsxs","children","_jsx","LoadingOutlined","PlusOutlined","style","marginTop","ImgCrop","rotationSlider","Upload","action","listType","showUploadList","beforeUpload","file","type","message","error","size","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","getBase64","url","isFunction","src","alt","width"],"sourceRoot":""}